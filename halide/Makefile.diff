diff --git a/Makefile b/Makefile
index a715367ec..776a0051b 100644
--- a/Makefile
+++ b/Makefile
@@ -18,7 +18,7 @@ ifeq ($(OS), Windows_NT)
     FPIC=
 else
     # let's assume "normal" UNIX such as linux
-    COMMON_LD_FLAGS=-ldl -lpthread -lz
+    COMMON_LD_FLAGS=-ldl -lpthread -lz -lpapihalide -lpapi -L /home/rafael/hdd/repositories/macalan/libpapihalide -L /home/rafael/hdd/repositories/macalan/papi/src
     FPIC=-fPIC
 ifeq ($(UNAME), Darwin)
     SHARED_EXT=dylib
@@ -398,6 +398,7 @@ SOURCE_FILES = \
   ParamMap.cpp \
   Parameter.cpp \
   PartitionLoops.cpp \
+  PAPIProfiling.cpp \
   Pipeline.cpp \
   Prefetch.cpp \
   PrintLoopNest.cpp \
@@ -545,6 +546,7 @@ HEADER_FILES = \
   ParamMap.h \
   Parameter.h \
   PartitionLoops.h \
+  PAPIProfiling.h \
   Pipeline.h \
   Prefetch.h \
   Profiling.h \
@@ -637,6 +639,8 @@ RUNTIME_CPP_COMPONENTS = \
   osx_get_symbol \
   osx_host_cpu_count \
   osx_opengl_context \
+  papi_profiler \
+  papi_profiler_inlined \
   posix_allocator \
   posix_clock \
   posix_error_handler \

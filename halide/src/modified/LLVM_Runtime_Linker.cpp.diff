diff --git a/src/LLVM_Runtime_Linker.cpp b/src/LLVM_Runtime_Linker.cpp
index 3416d26e9..5c8e8e2ee 100644
--- a/src/LLVM_Runtime_Linker.cpp
+++ b/src/LLVM_Runtime_Linker.cpp
@@ -103,6 +103,8 @@ DECLARE_CPP_INITMOD(osx_clock)
 DECLARE_CPP_INITMOD(osx_get_symbol)
 DECLARE_CPP_INITMOD(osx_host_cpu_count)
 DECLARE_CPP_INITMOD(osx_opengl_context)
+DECLARE_CPP_INITMOD(papi_profiler)
+DECLARE_CPP_INITMOD(papi_profiler_inlined)
 DECLARE_CPP_INITMOD(posix_allocator)
 DECLARE_CPP_INITMOD(posix_clock)
 DECLARE_CPP_INITMOD(posix_error_handler)
@@ -750,6 +752,7 @@ std::unique_ptr<llvm::Module> get_initial_module_for_target(Target t, llvm::LLVM
                 t.os != Target::QuRT) {
                 // MIPS doesn't support the atomics the profiler requires.
                 modules.push_back(get_initmod_profiler(c, bits_64, debug));
+                modules.push_back(get_initmod_papi_profiler(c, bits_64, debug));
             }
 
             if (t.has_feature(Target::MSAN)) {
@@ -803,6 +806,9 @@ std::unique_ptr<llvm::Module> get_initial_module_for_target(Target t, llvm::LLVM
             if (t.has_feature(Target::Profile)) {
                 modules.push_back(get_initmod_profiler_inlined(c, bits_64, debug));
             }
+            if (t.has_feature(Target::PAPI)) {
+                modules.push_back(get_initmod_papi_profiler_inlined(c, bits_64, debug));
+            }
         }
 
         if (module_type == ModuleAOT) {
